(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[570],{208:function(e,t,n){"use strict";var a=n(5893),i=(n(7294),n(251)),r=n(5125),s=n.n(r);t.Z=function(){return(0,a.jsx)("nav",{className:s().adminNav,children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)(i.O,{href:"/admin",children:(0,a.jsx)("a",{className:"navButton",children:"My memes"})})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.O,{href:"/admin/add-meme",children:(0,a.jsx)("a",{className:"navButton",children:"Add new meme"})})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.O,{href:"/admin/comments",children:(0,a.jsx)("a",{className:"navButton",children:"My comments"})})})]})})}},3987:function(e,t,n){"use strict";var a=n(7568),i=n(6042),r=n(9396),s=n(4051),o=n.n(s),l=n(5893),d=n(7294),c=n(4214),u=n(4530),m=n(8742),h=n.n(m),v=n(4637),f=n.n(v),p=n(388),g=n(7688),x=n(1163),j=n(6675),Z=n(1912),w=n(1400),M=void 0;t.Z=function(e){var t={form:{title:{value:"",valid:!1,touched:!1,validators:[c.C1,(0,c.kE)({min:5})],validationMessage:""},description:{value:"",valid:!1,touched:!1,validators:[c.C1,(0,c.kE)({min:10})],validationMessage:""},image:{value:"",valid:!1,touched:!1,validators:[c.C1],validationMessage:""}},formIsValid:!1},n=(0,x.useRouter)(),s=(0,d.useState)(t),m=s[0],v=s[1],_=(0,d.useState)(!1),b=_[0],y=_[1],N=(0,d.useState)({result:"",message:""}),S=N[0],P=N[1],C=(0,d.useState)(""),k=C[0],F=C[1],E=n.query.memeId,A="EDIT"===e.mode,T=!1,z=!0,I=function(e,t,n){(0,Z.Z)(v,F,e,t,n)},R=function(e){(0,w.Z)(v,e)},B=function(){var e=(0,a.Z)(o().mark((function e(t){var a,i,r,s,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={title:m.form.title.value,description:m.form.description.value,image:m.form.image.value},y(!0),(i=new FormData).append("title",a.title),i.append("description",a.description),a.image&&i.append("image",a.image),e.prev=7,r=g.ZP.URLS.API_POST+"/add-meme",s="POST",A&&"string"===typeof E&&(r=g.ZP.URLS.API_POST+"/update-meme",s="PATCH",i.append("memeId",E)),e.next=13,fetch(r,{method:s,credentials:"include",body:i});case 13:return l=e.sent,e.next=16,l.json();case 16:d=e.sent,P(d.flash),d.ok&&n.push("/admin"),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(7),console.log(e.t0.message);case 24:return e.prev=24,y(!1),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[7,21,24,27]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=(0,a.Z)(o().mark((function e(t){var n,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,fetch(g.ZP.URLS.API_POST+"/get-meme",{method:"POST",credentials:"include",body:JSON.stringify({memeId:t}),headers:{"Content-Type":"application/json"}});case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,P(a.flash),s=a.body[0],v((function(e){var t=e.form,n={title:(0,r.Z)((0,i.Z)({},t.title),{value:s.title,valid:!0,touched:!0}),description:(0,r.Z)((0,i.Z)({},t.description),{value:s.description,valid:!0,touched:!0}),image:(0,i.Z)({},t.image)};return F(g.ZP.URLS.APP+"/"+s.imageUrl),(0,r.Z)((0,i.Z)({},e),{form:n})})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0.message);case 16:return e.prev=16,y(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){"EDIT"===e.mode&&E&&q(E)}),[E]),(0,l.jsxs)("section",{className:f().mainForm,children:[A?(0,l.jsx)("h2",{children:"Edit your Meme:"}):(0,l.jsx)("h2",{children:"Add Meme right here:"}),S.message&&(0,l.jsx)(j.Z,{result:S.result,message:S.message}),(0,l.jsxs)("form",{onSubmit:B,children:[(0,l.jsx)(u.Z,{id:"title",label:"Meme title",placeholder:"Enter Meme title",required:!0,type:"text",control:"input",onChange:I,onBlur:R.bind(M,"title"),value:m.form.title.value,valid:m.form.title.valid,validationMessage:m.form.title.validationMessage,touched:m.form.title.touched}),(0,l.jsx)(u.Z,{id:"description",label:"Meme description",placeholder:"Type Meme description",required:!0,type:"text",control:"textarea",onChange:I,onBlur:R.bind(M,"description"),value:m.form.description.value,valid:m.form.description.valid,validationMessage:m.form.description.validationMessage,touched:m.form.description.touched}),(0,l.jsx)(p.Z,{id:"image",label:"The image, most vital part of Meme, don't screw it!",onChange:I,onBlur:R.bind(M,"image"),valid:m.form.image.valid,touched:m.form.image.touched}),(0,l.jsxs)("div",{className:h().imagePreview,children:[!k&&(0,l.jsx)("p",{children:"Please choose an image."}),k&&(0,l.jsx)("figure",{style:{backgroundImage:"url('".concat(k,"')"),backgroundSize:T?"contain":"cover",backgroundPosition:z?"left":"center"}})]}),(0,l.jsxs)("div",{className:f().actionsField,children:[!b&&!A&&(0,l.jsx)("button",{children:"Create Meme!"}),!b&&A&&(0,l.jsx)("button",{children:"Update Meme!"}),b&&(0,l.jsx)("p",{children:"Sending request..."})]})]})]})}},388:function(e,t,n){"use strict";var a=n(5893),i=(n(7294),n(2883)),r=n.n(i);t.Z=function(e){return(0,a.jsxs)("div",{className:r().inputField,children:[(0,a.jsx)("label",{htmlFor:e.id,children:e.label}),(0,a.jsx)("input",{className:[e.valid?"valid":"invalid",e.touched?"touched":"untouched"].join(" "),type:"file",id:e.id,onChange:function(t){return e.onChange(e.id,t.target.value,t.target.files)},onBlur:e.onBlur})]})}},6675:function(e,t,n){"use strict";var a=n(5893),i=(n(7294),n(9537)),r=n.n(i);t.Z=function(e){return(0,a.jsx)("div",{className:r().flashMessage,children:(0,a.jsx)("span",{className:"messageText "+e.result+"Msg",children:e.message})})}},4530:function(e,t,n){"use strict";var a=n(5893),i=(n(7294),n(2883)),r=n.n(i);t.Z=function(e){var t=0;return e.additionalInfo&&e.additionalInfo.passwordStrength&&(t=e.additionalInfo.passwordStrength),(0,a.jsxs)("div",{className:r().inputField,children:[e.label&&(0,a.jsx)("label",{htmlFor:e.id,children:e.label}),"input"===e.control&&(0,a.jsx)("input",{className:[e.valid?"valid":"invalid",e.touched?"touched":"untouched"].join(" "),type:e.type,id:e.id,required:e.required,value:e.value,placeholder:e.placeholder,onChange:function(t){return e.onChange(e.id,t.target.value,t.target.files)},onBlur:e.onBlur}),"textarea"===e.control&&(0,a.jsx)("textarea",{className:[e.valid?"valid":"invalid",e.touched?"touched":"untouched"].join(" "),id:e.id,rows:e.textareaRows,required:e.required,value:e.value,placeholder:e.placeholder,onChange:function(t){return e.onChange(e.id,t.target.value)},onBlur:e.onBlur}),3===t&&(0,a.jsx)("div",{className:"pass-result-strong",children:"Strong password"}),2===t&&(0,a.jsx)("div",{className:"pass-result-medium",children:"Medium password"}),1===t&&(0,a.jsx)("div",{className:"pass-result-weak",children:"Weak password"}),e.validationMessage&&(0,a.jsx)("div",{className:"validation-error-msg",children:e.validationMessage})]})}},1400:function(e,t,n){"use strict";var a=n(4924),i=n(6042),r=n(9396);t.Z=function(e,t){e((function(e){return(0,r.Z)((0,i.Z)({},e),{form:(0,r.Z)((0,i.Z)({},e.form),(0,a.Z)({},t,(0,r.Z)((0,i.Z)({},e.form[t]),{touched:!0})))})}))}},1912:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(4924),i=n(6042),r=n(9396),s=function(e,t,n,s,o){o&&function(e){var t=new FileReader,n=new Promise((function(e,n){t.onload=function(t){return e(t.target.result)},t.onerror=function(e){return n(e)}}));return t.readAsDataURL(e),n}(o[0]).then((function(e){t(e)})).catch((function(e){t("")})),e((function(e){var t=!0,l="",d=e.form[n],c=!0,u=!1,m=void 0;try{for(var h,v=d.validators[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var f=(0,h.value)(s);t=t&&f.isValid,l=l||f.validationError}}catch(j){u=!0,m=j}finally{try{c||null==v.return||v.return()}finally{if(u)throw m}}var p=(0,r.Z)((0,i.Z)({},e.form),(0,a.Z)({},n,(0,r.Z)((0,i.Z)({},d),{valid:t,value:o?o[0]:s,validationMessage:l}))),g=!0;for(var x in p)g=g&&p[x].valid;return(0,r.Z)((0,i.Z)({},e),{form:p,formIsValid:g})}))}},4214:function(e,t,n){"use strict";n.d(t,{Bj:function(){return s},C1:function(){return a},Do:function(){return r},kE:function(){return i}});var a=function(e){var t=""!==e.trim();return{isValid:t,validationError:t?"":"This field is required."}},i=function(e){return function(t){var n=!0,a="";return e.min&&(a=(n=n&&t.trim().length>=e.min)?"":"This field requires at least ".concat(e.min," characters.")),e.max&&(a=(n=n&&t.trim().length<=e.max)?"":"This field can only be ".concat(e.max," characters long.")),{isValid:n,validationError:a}}},r=function(e){var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e);return{isValid:t,validationError:t?"":"This field requires valid email."}},s=function(e){var t={strongHintMsg:"Hint: strong level password needs to have at least two special characters, at least one digit and 8 characters long.",mediumHintMsg:"Valid password requires lower and uppercase letters with at least one special character, and must be at least six characters long.",strongRegex:/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})/,mediumRegex:/((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))/,twoSpecialCharRegex:/(?:[^`!@#$%^&*\-_=+'\/.,]*[`!@#$%^&*\-_=+'\/.,]){2}/},n=!1,a="",i=0;return t.strongRegex.test(e)&&t.twoSpecialCharRegex.test(e)?(n=!0,a="",i=3):t.mediumRegex.test(e)?(n=!0,a=t.strongHintMsg,i=2):(n=!1,a=t.mediumHintMsg,i=1),{isValid:n,validationError:a,passwordStrength:i}}},5125:function(e){e.exports={adminNav:"AdminNav_adminNav__oH03H"}},8742:function(e){e.exports={imagePreview:"EditMeme_imagePreview__HFvhv"}},9537:function(e){e.exports={flashMessage:"FlashMessage_flashMessage__2D1Ek"}},4637:function(e){e.exports={mainForm:"Form_mainForm__hu6sw",actionsField:"Form_actionsField__O5__w"}},2883:function(e){e.exports={inputField:"Input_inputField__A17yQ"}}}]);