(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{577:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(7713)}])},7713:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return b}});var r=t(5893),s=t(7294),a=t(208),i=t(7568),c=t(6042),o=t(9396),u=t(9815),l=t(4051),m=t.n(l),d=t(7688),f=t(6877),h=t.n(f),x=t(6675),p=t(3474),j=t(7345),v=t.n(j),g=function(e){var n=(0,s.useState)(!1),t=n[0],a=n[1],u=(0,s.useState)({result:"",message:""}),l=u[0],f=u[1],h=function(){var n=(0,i.Z)(m().mark((function n(){var t,r;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(!0),n.prev=1,n.next=4,fetch(d.ZP.URLS.API_POST+"/delete-meme",{method:"DELETE",credentials:"include",body:JSON.stringify({memeId:e.id}),headers:{"Content-Type":"application/json"}});case 4:return t=n.sent,n.next=7,t.json();case 7:r=n.sent,f(r.flash),r.ok&&e.removeHandler(e.id),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),console.log(n.t0.message);case 15:return n.prev=15,a(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[1,12,15,18]])})));return function(){return n.apply(this,arguments)}}();return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("div",{className:v().adminActions,children:[(0,r.jsx)("a",{href:"/admin/edit-meme/"+e.id,className:"actionButton",children:"Edit"}),(0,r.jsx)("button",{onClick:h,className:"actionButton",children:"Delete"})]}),l.message&&(0,r.jsx)(x.Z,{result:l.result,message:l.message}),!t&&(0,r.jsx)(p.Z,(0,o.Z)((0,c.Z)({},e),{User:{username:"You",profileImage:"images/no_profile_picture.png"},showReactionButtons:!1}))]})},_=function(e){var n=(0,s.useState)([]),t=n[0],a=n[1],l=(0,s.useState)(!1),f=l[0],p=l[1],j=(0,s.useCallback)((0,i.Z)(m().mark((function e(){var n,t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,fetch(d.ZP.URLS.API_POST+"/get-my-memes",{method:"GET",credentials:"include"});case 4:return n=e.sent,e.next=7,n.json();case 7:(t=e.sent).ok&&a((function(e){return(0,u.Z)(e).concat((0,u.Z)(t.body))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0.message);case 14:return e.prev=14,p(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),[]),v=function(e){a((function(n){return n.filter((function(n){return n.id!==e}))}))};return(0,s.useEffect)((function(){j()}),[j]),(0,r.jsxs)(s.Fragment,{children:[f&&(0,r.jsx)("p",{children:"Loading memes..."}),!f&&(0,r.jsx)("section",{className:"commonCard",children:t.length>0?(0,r.jsx)("ul",{children:t.map((function(e){return(0,r.jsx)("li",{className:h().feedItem,children:(0,r.jsx)(g,(0,o.Z)((0,c.Z)({},e),{removeHandler:v}))},e.id)}))}):(0,r.jsx)(x.Z,{result:"error",message:"No memes found! Maybe you want to add one?"})})]})},b=function(){return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(a.Z,{}),(0,r.jsx)(_,{})]})}},208:function(e,n,t){"use strict";var r=t(5893),s=(t(7294),t(251)),a=t(5125),i=t.n(a);n.Z=function(){return(0,r.jsx)("nav",{className:i().adminNav,children:(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,r.jsx)(s.O,{href:"/admin",children:(0,r.jsx)("a",{className:"navButton",children:"My memes"})})}),(0,r.jsx)("li",{children:(0,r.jsx)(s.O,{href:"/admin/add-meme",children:(0,r.jsx)("a",{className:"navButton",children:"Add new meme"})})}),(0,r.jsx)("li",{children:(0,r.jsx)(s.O,{href:"/admin/comments",children:(0,r.jsx)("a",{className:"navButton",children:"My comments"})})})]})})}},3474:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var r=t(5893),s=t(7294),a=t(4420),i=t(7568),c=t(4051),o=t.n(c),u=t(9631),l=t(7688),m=t(4502),d=function(e){var n=function(){var n=(0,i.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.isButtonActive){n.next=2;break}return n.abrupt("return");case 2:return e.setStateForLoading(!0),n.prev=3,n.next=6,fetch(l.ZP.URLS.API_POST+"/add-reaction",{method:"POST",credentials:"include",body:JSON.stringify({type:e.emoji.number,memeId:e.memeId}),headers:{"Content-Type":"application/json"}});case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),console.log(n.t0.message);case 11:return n.prev=11,e.setStateForLoading(!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[3,8,11,14]])})));return function(){return n.apply(this,arguments)}}(),t=0===e.numberOfReactions?" dimItem":"",s=e.isButtonActive?" active":" inactive",a=e.chosenType===e.emoji.number?" isChosen":"";return(0,r.jsxs)("span",{className:"reactionIcon"+t,children:[(0,r.jsx)("img",{src:"/images/cheese-emojis/emoji-"+e.emoji.name+".png",alt:e.emoji.name,onClick:n,className:s}),(0,r.jsx)("b",{className:a,children:e.numberOfReactions})]})},f=t(3829),h=t.n(f),x=function(e){var n=(0,u.Eu)(),t=n.user.userId,a=n.isLoggedIn,c=(0,s.useState)(!1),f=c[0],x=c[1],p=(0,s.useState)(!1),j=p[0],v=p[1],g=(0,s.useState)(0),_=g[0],b=g[1],N=e.showReactionButtons,S=function(){var n=(0,i.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x(!0),n.prev=1,n.next=4,fetch(l.ZP.URLS.API_POST+"/remove-reaction",{method:"DELETE",credentials:"include",body:JSON.stringify({memeId:e.memeId}),headers:{"Content-Type":"application/json"}});case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),console.log(n.t0.message);case 9:return n.prev=9,x(!1),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})));return function(){return n.apply(this,arguments)}}(),y=function(){var n=!1,r=0;e.reactions.forEach((function(e){e.Users.find((function(e){return e.id===t}))&&(r=e.type,n=!0)})),b(r),v(n)};(0,s.useEffect)((function(){y()}),[y]);var I=function(n){var t=e.reactions.find((function(e){return e.type===n}));return t?t.Users.flat().length:0};return(0,r.jsxs)("div",{className:h().reactionPanel,children:[N&&(j?(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)("button",{className:"reactBtn remove",onClick:S,children:"Remove reaction"}),(0,r.jsx)("span",{className:"reactInfo",children:"You reacted already!"})]}):a?(0,r.jsxs)("button",{className:"reactBtn inactive",disabled:!0,children:["Here you can react ",(0,r.jsx)(m.Z,{src:"right-arrow-alt",alt:"Arrow right"})]}):(0,r.jsx)("button",{className:"reactBtn inactive",disabled:!0,children:"Need to login to react!"})),f&&(0,r.jsx)("span",{children:"Loading reactions..."}),!f&&(0,r.jsx)("span",{children:l.Ax.map((function(n){return(0,r.jsx)(d,{emoji:n,numberOfReactions:I(n.number),setStateForLoading:x,memeId:e.memeId,isButtonActive:N&&a&&!j,chosenType:_})}))})]})},p=t(8524),j=t.n(p),v=function(e){return(0,r.jsxs)("span",{className:j().reactionSumStar,children:[(0,r.jsx)("b",{children:e.reactions.map((function(e){return e.Users})).flat().length}),(0,r.jsx)("img",{src:"/images/star.png",alt:"Star for number of reactions"})]})},g=function(e){var n=(0,a.v)(e.createdAt);return(0,r.jsxs)("article",{className:"feedItemContent",children:[(0,r.jsxs)("header",{children:[(0,r.jsx)("h3",{children:e.title}),(0,r.jsxs)("p",{children:["by: ",(0,r.jsx)("i",{children:e.User.username}),", at: ",(0,r.jsx)("time",{children:n})]})]}),(0,r.jsx)("section",{children:e.description}),(0,r.jsxs)("figure",{children:[(0,r.jsx)(v,{reactions:e.reactions}),(0,r.jsx)("img",{src:e.imageUrl,alt:e.title})]}),(0,r.jsx)(x,{reactions:e.reactions,memeId:e.id,showReactionButtons:e.showReactionButtons})]})}},6675:function(e,n,t){"use strict";var r=t(5893),s=(t(7294),t(9537)),a=t.n(s);n.Z=function(e){return(0,r.jsx)("div",{className:a().flashMessage,children:(0,r.jsx)("span",{className:"messageText "+e.result+"Msg",children:e.message})})}},4420:function(e,n,t){"use strict";t.d(n,{v:function(){return r}});var r=function(e){return new Date(e).toLocaleString("en-GB",{timeZone:"UTC"})}},5125:function(e){e.exports={adminNav:"AdminNav_adminNav__oH03H"}},7345:function(e){e.exports={adminActions:"AdminMemeItem_adminActions__B6cbH"}},6877:function(e){e.exports={feedItem:"Feed_feedItem__Aiwxo",commentsLoginInfo:"Feed_commentsLoginInfo__i4Vkp"}},9537:function(e){e.exports={flashMessage:"FlashMessage_flashMessage__2D1Ek"}},3829:function(e){e.exports={reactionPanel:"ReactionPanel_reactionPanel__cNIgz"}},8524:function(e){e.exports={reactionSumStar:"ReactionSumStar_reactionSumStar__G5a3y"}},9815:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(943);var s=t(3375);var a=t(1566);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,s.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(e){e.O(0,[774,888,179],(function(){return n=577,e(e.s=n);var n}));var n=e.O();_N_E=n}]);