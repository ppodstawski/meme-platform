(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return a(7449)}])},7449:function(e,r,a){"use strict";a.r(r),a.d(r,{__N_SSP:function(){return x},default:function(){return Z}});var n=a(5893),s=a(7294),t=a(7568),i=a(4051),o=a.n(i),l=a(9631),u=a(4530),d=a(6675),c=a(4637),f=a.n(c),v=a(4034),m=a(1400),h=a(7752),p=a(4214),g=void 0,w=function(e){var r=(0,l.Eu)().login,a={form:{email:{value:"",valid:!1,touched:!1,validators:[p.C1,p.Do],validationMessage:""},password:{value:"",valid:!1,touched:!1,validators:[p.C1],validationMessage:""}},formIsValid:!1},i=(0,s.useState)(a),c=i[0],w=i[1],x=(0,s.useState)(!1),Z=x[0],_=x[1],j=(0,s.useState)({result:"",message:""}),S=j[0],b=j[1],y=(0,s.useRef)(),k=function(e,r){(0,v.Z)(w,e,r)},N=function(e){(0,m.Z)(w,e)},M=function(){var e=(0,t.Z)(o().mark((function e(a){var n,s,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),"undefined"!==typeof y){e.next=4;break}return b({result:"error",message:"CSRF Token not acquired."}),e.abrupt("return");case 4:return n={email:c.form.email.value,password:c.form.password.value,_csrf:y.current.value,isLogin:!0},e.next=7,(0,h.Z)(_,n);case 7:(s=e.sent).ok?(b(s.flash),t=new Date((new Date).getTime()+864e5),r(s.body.userId,t.toISOString(),{userId:s.body.userId,email:s.body.email,username:s.body.username,profileImage:s.body.profileImage})):b(s.flash);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,n.jsxs)("section",{className:f().mainForm,children:[(0,n.jsx)("h2",{children:"Login"}),S.message&&(0,n.jsx)(d.Z,{result:S.result,message:S.message}),!e.csrfToken&&(0,n.jsx)(d.Z,{result:"error",message:"Error: token not received! Submission is not possible."}),(0,n.jsxs)("form",{onSubmit:M,children:[(0,n.jsx)("div",{children:(0,n.jsx)(u.Z,{id:"email",label:"Your email",placeholder:"Type your email",required:!0,type:"email",control:"input",onChange:k,onBlur:N.bind(g,"email"),value:c.form.email.value,valid:c.form.email.valid,validationMessage:c.form.email.validationMessage,touched:c.form.email.touched})}),(0,n.jsx)("div",{children:(0,n.jsx)(u.Z,{id:"password",label:"Your password",placeholder:"Enter your password",required:!0,type:"password",control:"input",onChange:k,onBlur:N.bind(g,"password"),value:c.form.password.value,valid:c.form.password.valid,validationMessage:c.form.password.validationMessage,touched:c.form.password.touched})}),(0,n.jsxs)("div",{className:f().actionsField,children:[!Z&&(0,n.jsx)("button",{disabled:!e.csrfToken,children:"Login"}),Z&&(0,n.jsx)("p",{children:"Sending request..."}),(0,n.jsx)("a",{href:"/signup",children:"Create new account"}),e.csrfToken&&(0,n.jsx)("input",{name:"_csrf",type:"hidden",value:e.csrfToken,ref:y})]})]})]})},x=!0,Z=function(e){var r=e.csrfToken;return(0,n.jsx)(s.Fragment,{children:(0,n.jsx)(w,{csrfToken:r})})}},6675:function(e,r,a){"use strict";var n=a(5893),s=(a(7294),a(9537)),t=a.n(s);r.Z=function(e){return(0,n.jsx)("div",{className:t().flashMessage,children:(0,n.jsx)("span",{className:"messageText "+e.result+"Msg",children:e.message})})}},4530:function(e,r,a){"use strict";var n=a(5893),s=(a(7294),a(2883)),t=a.n(s);r.Z=function(e){var r=0;return e.additionalInfo&&e.additionalInfo.passwordStrength&&(r=e.additionalInfo.passwordStrength),(0,n.jsxs)("div",{className:t().inputField,children:[e.label&&(0,n.jsx)("label",{htmlFor:e.id,children:e.label}),"input"===e.control&&(0,n.jsx)("input",{className:[e.valid?"valid":"invalid",e.touched?"touched":"untouched"].join(" "),type:e.type,id:e.id,required:e.required,value:e.value,placeholder:e.placeholder,onChange:function(r){return e.onChange(e.id,r.target.value,r.target.files)},onBlur:e.onBlur}),"textarea"===e.control&&(0,n.jsx)("textarea",{className:[e.valid?"valid":"invalid",e.touched?"touched":"untouched"].join(" "),id:e.id,rows:e.textareaRows,required:e.required,value:e.value,placeholder:e.placeholder,onChange:function(r){return e.onChange(e.id,r.target.value)},onBlur:e.onBlur}),3===r&&(0,n.jsx)("div",{className:"pass-result-strong",children:"Strong password"}),2===r&&(0,n.jsx)("div",{className:"pass-result-medium",children:"Medium password"}),1===r&&(0,n.jsx)("div",{className:"pass-result-weak",children:"Weak password"}),e.validationMessage&&(0,n.jsx)("div",{className:"validation-error-msg",children:e.validationMessage})]})}},1400:function(e,r,a){"use strict";var n=a(4924),s=a(6042),t=a(9396);r.Z=function(e,r){e((function(e){return(0,t.Z)((0,s.Z)({},e),{form:(0,t.Z)((0,s.Z)({},e.form),(0,n.Z)({},r,(0,t.Z)((0,s.Z)({},e.form[r]),{touched:!0})))})}))}},4034:function(e,r,a){"use strict";var n=a(4924),s=a(6042),t=a(9396);r.Z=function(e,r,a){e((function(e){var i=!0,o="",l={passwordStrength:0},u=e.form[r],d=!0,c=!1,f=void 0;try{for(var v,m=u.validators[Symbol.iterator]();!(d=(v=m.next()).done);d=!0){var h=v.value;if("password"===r){var p=h(a);l.passwordStrength=p.passwordStrength,i=i&&p.isValid,o=o||p.validationError}else{var g=h(a);i=i&&g.isValid,o=o||g.validationError}}}catch(_){c=!0,f=_}finally{try{d||null==m.return||m.return()}finally{if(c)throw f}}var w=(0,t.Z)((0,s.Z)({},e.form),(0,n.Z)({},r,(0,t.Z)((0,s.Z)({},u),{valid:i,value:a,validationMessage:o})));"password"===r&&l.passwordStrength>0&&(w.password.additionalInfo.passwordStrength=l.passwordStrength);var x=!0;for(var Z in w)x=x&&w[Z].valid;return(0,t.Z)((0,s.Z)({},e),{form:w,formIsValid:x})}))}},7752:function(e,r,a){"use strict";var n=a(7568),s=a(6042),t=a(4051),i=a.n(t),o=a(7688),l=function(){var e=(0,n.Z)(i().mark((function e(r,a){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),n=a.isLogin?o.ZP.URLS.LOGIN:o.ZP.URLS.SIGNUP,e.prev=2,e.next=5,fetch(o.ZP.URLS.API_POST+n,{method:"POST",credentials:"include",body:JSON.stringify((0,s.Z)({},a)),headers:{"Content-Type":"application/json"}});case 5:return t=e.sent,r(!1),e.next=9,t.json();case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0.message);case 15:return e.prev=15,r(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})));return function(r,a){return e.apply(this,arguments)}}();r.Z=l},4214:function(e,r,a){"use strict";a.d(r,{Bj:function(){return i},C1:function(){return n},Do:function(){return t},kE:function(){return s}});var n=function(e){var r=""!==e.trim();return{isValid:r,validationError:r?"":"This field is required."}},s=function(e){return function(r){var a=!0,n="";return e.min&&(n=(a=a&&r.trim().length>=e.min)?"":"This field requires at least ".concat(e.min," characters.")),e.max&&(n=(a=a&&r.trim().length<=e.max)?"":"This field can only be ".concat(e.max," characters long.")),{isValid:a,validationError:n}}},t=function(e){var r=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e);return{isValid:r,validationError:r?"":"This field requires valid email."}},i=function(e){var r={strongHintMsg:"Hint: strong level password needs to have at least two special characters, at least one digit and 8 characters long.",mediumHintMsg:"Valid password requires lower and uppercase letters with at least one special character, and must be at least six characters long.",strongRegex:/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})/,mediumRegex:/((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))/,twoSpecialCharRegex:/(?:[^`!@#$%^&*\-_=+'\/.,]*[`!@#$%^&*\-_=+'\/.,]){2}/},a=!1,n="",s=0;return r.strongRegex.test(e)&&r.twoSpecialCharRegex.test(e)?(a=!0,n="",s=3):r.mediumRegex.test(e)?(a=!0,n=r.strongHintMsg,s=2):(a=!1,n=r.mediumHintMsg,s=1),{isValid:a,validationError:n,passwordStrength:s}}},9537:function(e){e.exports={flashMessage:"FlashMessage_flashMessage__2D1Ek"}},4637:function(e){e.exports={mainForm:"Form_mainForm__hu6sw",actionsField:"Form_actionsField__O5__w"}},2883:function(e){e.exports={inputField:"Input_inputField__A17yQ"}}},function(e){e.O(0,[774,888,179],(function(){return r=3236,e(e.s=r);var r}));var r=e.O();_N_E=r}]);